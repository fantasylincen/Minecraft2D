<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>潜行模式测试</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            font-family: Arial, sans-serif;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        
        .test-button:hover {
            background: #357abd;
        }
        
        .debug-info {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .debug-info h3 {
            margin-top: 0;
            color: #4a90e2;
        }
        
        #log {
            white-space: pre-line;
            color: #ccc;
        }
        
        .key-indicator {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #333;
            border: 1px solid #666;
            border-radius: 4px;
            text-align: center;
            line-height: 30px;
            margin: 5px;
            font-weight: bold;
        }
        
        .key-indicator.active {
            background: #4a90e2;
            border-color: #7ab5f0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🎮 潜行模式测试</h1>
        
        <div>
            <button id="testSneakBtn" class="test-button">测试潜行模式</button>
            <button id="clearLogBtn" class="test-button">清空日志</button>
        </div>
        
        <div class="debug-info">
            <h3>🕹️ 潜行控制说明</h3>
            <p>请在游戏运行时测试以下按键：</p>
            <div>
                <span class="key-indicator" id="zKey">Z</span> - 向左潜行
            </div>
            <div>
                <span class="key-indicator" id="cKey">C</span> - 向右潜行
            </div>
        </div>
        
        <div class="debug-info">
            <h3>📊 调试信息</h3>
            <div id="log"></div>
        </div>
        
        <div class="debug-info">
            <h3>💡 说明</h3>
            <p>这个页面用于测试潜行模式功能：</p>
            <ul>
                <li>启动游戏后，按Z键向左潜行，按C键向右潜行</li>
                <li>潜行时玩家移动速度会降低到30%</li>
                <li>潜行时玩家身体会变小</li>
                <li>查看调试信息了解潜行状态</li>
            </ul>
        </div>
    </div>

    <script>
        // 日志功能
        const logElement = document.getElementById('log');
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }

        // 按键状态跟踪
        const keys = {
            'z': false,
            'c': false
        };

        // 更新按键指示器
        function updateKeyIndicator(key, isPressed) {
            const element = document.getElementById(key + 'Key');
            if (element) {
                if (isPressed) {
                    element.classList.add('active');
                } else {
                    element.classList.remove('active');
                }
            }
        }

        // 键盘事件监听
        document.addEventListener('keydown', (event) => {
            if (event.key === 'z' || event.key === 'Z') {
                keys.z = true;
                updateKeyIndicator('z', true);
                log('按下 Z 键 - 向左潜行');
            } else if (event.key === 'c' || event.key === 'C') {
                keys.c = true;
                updateKeyIndicator('c', true);
                log('按下 C 键 - 向右潜行');
            }
        });

        document.addEventListener('keyup', (event) => {
            if (event.key === 'z' || event.key === 'Z') {
                keys.z = false;
                updateKeyIndicator('z', false);
                log('释放 Z 键');
            } else if (event.key === 'c' || event.key === 'C') {
                keys.c = false;
                updateKeyIndicator('c', false);
                log('释放 C 键');
            }
        });

        // 按钮事件
        document.getElementById('testSneakBtn').addEventListener('click', () => {
            log('🧪 开始测试潜行模式...');
            log('请在游戏运行时按 Z 和 C 键测试潜行功能');
        });

        document.getElementById('clearLogBtn').addEventListener('click', () => {
            logElement.textContent = '';
        });

        // 初始化
        log('🚀 潜行模式测试页面已加载');
        log('请启动游戏并按 Z 和 C 键测试潜行功能');
    </script>
</body>
</html>