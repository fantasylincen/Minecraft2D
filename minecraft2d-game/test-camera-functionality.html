<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‘„åƒæœºåŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        h1 {
            color: #4a90e2;
            text-align: center;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #444;
            border-radius: 5px;
            background: #333;
        }
        .log {
            background: #1e1e1e;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background 0.3s;
        }
        .button:hover {
            background: #357abd;
        }
        .success {
            color: #4caf50;
        }
        .error {
            color: #f44336;
        }
        .info {
            color: #2196f3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“· æ‘„åƒæœºåŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>æµ‹è¯•è¯´æ˜</h2>
            <p>æœ¬æµ‹è¯•ç”¨äºéªŒè¯æ‘„åƒæœºç¼©æ”¾åŠŸèƒ½çš„å®ç°ï¼š</p>
            <ul>
                <li>æ‘„åƒæœºå›ºå®šç¼©æ”¾èŒƒå›´ï¼ˆæœ€å°20%ï¼Œæœ€å¤§200%ï¼‰</li>
                <li>Cameraç±»çš„åˆå§‹åŒ–å’ŒåŠŸèƒ½</li>
                <li>é¼ æ ‡æ»šè½®ç¼©æ”¾åŠŸèƒ½</li>
                <li>ç¼©æ”¾èŒƒå›´é™åˆ¶</li>
            </ul>
            <p><strong>æ³¨æ„ï¼š</strong>æœ€å°å’Œæœ€å¤§ç¼©æ”¾æ¯”ä¾‹æ˜¯å›ºå®šçš„ï¼Œä¸éœ€è¦åœ¨é…ç½®ç•Œé¢ä¸­è®¾ç½®ã€‚</p>
        </div>
        
        <div class="test-section">
            <button id="runTestBtn" class="button">â–¶ï¸ è¿è¡Œæµ‹è¯•</button>
            <button id="clearLogBtn" class="button">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
        </div>
        
        <div class="test-section">
            <h2>æµ‹è¯•æ—¥å¿—</h2>
            <div id="log" class="log"></div>
        </div>
        
        <div class="test-section">
            <h2>æ“ä½œé“¾æ¥</h2>
            <a href="http://localhost:5174/Minecraft2D/" class="button">ğŸ® æ‰“å¼€æ¸¸æˆ</a>
        </div>
    </div>

    <script>
        const logElement = document.getElementById('log');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const typeClass = type === 'success' ? 'success' : 
                             type === 'error' ? 'error' : 'info';
            logElement.innerHTML += `<div class="${typeClass}">[${timestamp}] ${message}</div>`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(`[${timestamp}] ${message}`);
        }
        
        function clearLog() {
            logElement.innerHTML = '';
        }
        
        document.getElementById('clearLogBtn').addEventListener('click', clearLog);
        
        document.getElementById('runTestBtn').addEventListener('click', async () => {
            clearLog();
            log('ğŸš€ å¼€å§‹è¿è¡Œæ‘„åƒæœºåŠŸèƒ½æµ‹è¯•...', 'info');
            
            try {
                // æµ‹è¯•Cameraç±»
                log('ğŸ“¹ æµ‹è¯•Cameraç±»...', 'info');
                try {
                    const { Camera } = await import('./src/camera/Camera.js');
                    log('âœ… æˆåŠŸå¯¼å…¥Cameraæ¨¡å—', 'success');
                    
                    // åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„canvaså…ƒç´ 
                    const mockCanvas = {
                        width: 800,
                        height: 600,
                        addEventListener: () => {}
                    };
                    
                    // åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„worldConfig
                    const mockWorldConfig = {
                        BLOCK_SIZE: 16,
                        CHUNK_SIZE: 16
                    };
                    
                    // åˆ›å»ºCameraå®ä¾‹
                    const camera = new Camera(mockCanvas, mockWorldConfig);
                    log('âœ… Cameraå®ä¾‹åˆ›å»ºæˆåŠŸ', 'success');
                    
                    // æµ‹è¯•å›ºå®šç¼©æ”¾èŒƒå›´
                    log('ğŸ” æµ‹è¯•å›ºå®šç¼©æ”¾èŒƒå›´...', 'info');
                    log(`ğŸ” æœ€å°ç¼©æ”¾(å›ºå®š): ${camera.minZoom} (${camera.minZoom * 100}%)`, 'info');
                    log(`ğŸ” æœ€å¤§ç¼©æ”¾(å›ºå®š): ${camera.maxZoom} (${camera.maxZoom * 100}%)`, 'info');
                    
                    if (camera.minZoom === 0.2) {
                        log('âœ… æœ€å°ç¼©æ”¾å€¼æ­£ç¡®(0.2)', 'success');
                    } else {
                        log(`âŒ æœ€å°ç¼©æ”¾å€¼é”™è¯¯ï¼ŒæœŸæœ›0.2ï¼Œå®é™…${camera.minZoom}`, 'error');
                    }
                    
                    if (camera.maxZoom === 2.0) {
                        log('âœ… æœ€å¤§ç¼©æ”¾å€¼æ­£ç¡®(2.0)', 'success');
                    } else {
                        log(`âŒ æœ€å¤§ç¼©æ”¾å€¼é”™è¯¯ï¼ŒæœŸæœ›2.0ï¼Œå®é™…${camera.maxZoom}`, 'error');
                    }
                    
                    // æµ‹è¯•åˆå§‹å±æ€§
                    log(`ğŸ” åˆå§‹ç¼©æ”¾: ${camera.zoom}`, 'info');
                    
                    // æµ‹è¯•ç¼©æ”¾åŠŸèƒ½
                    log('\nğŸ” æµ‹è¯•ç¼©æ”¾åŠŸèƒ½...', 'info');
                    camera.setZoom(1.5);
                    log(`ç¼©æ”¾è®¾ç½®ä¸º1.5: ${camera.zoom}`, 'info');
                    
                    camera.zoomBy(1.2);
                    log(`ç¼©æ”¾å¢åŠ 20%: ${camera.zoom}`, 'info');
                    
                    camera.zoomBy(0.8);
                    log(`ç¼©æ”¾å‡å°‘20%: ${camera.zoom}`, 'info');
                    
                    // æµ‹è¯•ç¼©æ”¾é™åˆ¶
                    log('\nğŸ” æµ‹è¯•ç¼©æ”¾é™åˆ¶...', 'info');
                    camera.setZoom(0.1); // åº”è¯¥è¢«é™åˆ¶
                    log(`è®¾ç½®è¿‡å°ç¼©æ”¾(0.1): ${camera.zoom}`, 'info');
                    
                    camera.setZoom(5.0); // åº”è¯¥è¢«é™åˆ¶
                    log(`è®¾ç½®è¿‡å¤§ç¼©æ”¾(5.0): ${camera.zoom}`, 'info');
                    
                    log('âœ… Cameraç±»æµ‹è¯•å®Œæˆ', 'success');
                } catch (error) {
                    log(`âŒ Cameraç±»æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                    console.error('Cameraç±»æµ‹è¯•é”™è¯¯:', error);
                }
                
                log('\nğŸ‰ æ‘„åƒæœºåŠŸèƒ½æµ‹è¯•å®Œæˆ', 'success');
                
            } catch (error) {
                log(`âŒ æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                console.error('æµ‹è¯•é”™è¯¯:', error);
            }
        });
    </script>
</body>
</html>