<!DOCTYPE html>
<html>
<head>
    <title>错误日志测试</title>
</head>
<body>
    <h1>错误日志测试</h1>
    <button onclick="triggerJavaScriptError()">触发JavaScript错误</button>
    <button onclick="triggerPromiseRejection()">触发Promise拒绝</button>
    <button onclick="checkLogs()">检查日志</button>
    
    <script>
        // 触发一个JavaScript错误
        function triggerJavaScriptError() {
            throw new Error('这是一个测试JavaScript错误');
        }
        
        // 触发一个Promise拒绝
        function triggerPromiseRejection() {
            Promise.reject(new Error('这是一个测试Promise拒绝'));
        }
        
        // 检查日志
        function checkLogs() {
            fetch('http://localhost:3001/api/error-log')
                .then(response => response.json())
                .then(data => {
                    console.log('日志内容:', data.content);
                    alert('日志内容已输出到控制台');
                })
                .catch(error => {
                    console.error('获取日志失败:', error);
                    alert('获取日志失败: ' + error.message);
                });
        }
    </script>
</body>
</html>